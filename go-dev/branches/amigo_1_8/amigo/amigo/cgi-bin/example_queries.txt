<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en" dir="ltr">
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
		<meta name="keywords" content="Example Queries" />
<link rel="shortcut icon" href="/favicon.ico" />
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="GO Public (English)" />
		<title>Example Queries - GO Public</title>
		<style type="text/css" media="screen,projection">/*<![CDATA[*/ @import "/skins/monobook/main.css?42b"; /*]]>*/</style>
		<link rel="stylesheet" type="text/css" media="print" href="/skins/common/commonPrint.css?42b" />

		<link rel="stylesheet" type="text/css" media="handheld" href="/skins/monobook/handheld.css?42b" />
		<!--[if lt IE 5.5000]><style type="text/css">@import "/skins/monobook/IE50Fixes.css?42b";</style><![endif]-->
		<!--[if IE 5.5000]><style type="text/css">@import "/skins/monobook/IE55Fixes.css?42b";</style><![endif]-->
		<!--[if IE 6]><style type="text/css">@import "/skins/monobook/IE60Fixes.css?42b";</style><![endif]-->
		<!--[if IE 7]><style type="text/css">@import "/skins/monobook/IE70Fixes.css?42b";</style><![endif]-->
		<!--[if lt IE 7]><script type="text/javascript" src="/skins/common/IEFixes.js?42b"></script>
		<meta http-equiv="imagetoolbar" content="no" /><![endif]-->
		
		<script type= "text/javascript">/*<![CDATA[*/
var skin = "monobook";
var stylepath = "/skins";
var wgArticlePath = "/index.php/$1";
var wgScriptPath = "";
var wgServer = "http://wiki.geneontology.org";
var wgCanonicalNamespace = "";
var wgCanonicalSpecialPageName = false;
var wgNamespaceNumber = 0;
var wgPageName = "Example_Queries";
var wgTitle = "Example Queries";
var wgArticleId = "1516";
var wgIsArticle = true;
var wgUserName = null;
var wgUserLanguage = "en";
var wgContentLanguage = "en";
var wgBreakFrames = false;
var wgCurRevisionId = "4213";
/*]]>*/</script>
                
		<script type="text/javascript" src="/skins/common/wikibits.js?42b"><!-- wikibits js --></script>

		<script type="text/javascript" src="/index.php?title=-&amp;action=raw&amp;gen=js"><!-- site js --></script>
		<style type="text/css">/*<![CDATA[*/
@import "/index.php?title=MediaWiki:Common.css&usemsgcache=yes&action=raw&ctype=text/css&smaxage=18000";
@import "/index.php?title=MediaWiki:Monobook.css&usemsgcache=yes&action=raw&ctype=text/css&smaxage=18000";
@import "/index.php?title=-&action=raw&gen=css&maxage=18000";
/*]]>*/</style>
		<!-- Head Scripts -->
			</head>
<body  class="mediawiki ns-0 ltr page-Example_Queries">
	<div id="globalWrapper">
		<div id="column-content">
	<div id="content">

		<a name="top" id="top"></a>
				<h1 class="firstHeading">Example Queries</h1>
		<div id="bodyContent">
			<h3 id="siteSub">From GO Public</h3>
			<div id="contentSub"></div>
									<div id="jump-to-nav">Jump to: <a href="#column-one">navigation</a>, <a href="#searchInput">search</a></div>			<!-- start content -->

			<p>This page has examples of various kinds of queries possible on the GO Database. This assumes some basic knowledge of SQL, and the availability of the GO database - either local or via remote queries. A <a href="http://go.berkeleybop.org/goose" class="external text" title="http://go.berkeleybop.org/goose" rel="nofollow">web-based interface</a> to the GO database mirrors at Berkeley BOP and EBI is also available. For more details, see:
</p>
<ul><li> <a href="http://www.geneontology.org/GO.database.shtml" class="external free" title="http://www.geneontology.org/GO.database.shtml" rel="nofollow">http://www.geneontology.org/GO.database.shtml</a>
</li></ul>
<p>This page will eventually replace the old <a href="http://www.godatabase.org/dev/sql/doc/example-queries.html" class="external text" title="http://www.godatabase.org/dev/sql/doc/example-queries.html" rel="nofollow">example queries page on godatabase.org</a>
</p><p>If you have MySQL5 you can use <b>views</b> to implement many of these queries. Example queries will be hyperlinked to the <a href="http://www.geneontology.org/GO.database.shtml#autodoc" class="external text" title="http://www.geneontology.org/GO.database.shtml#autodoc" rel="nofollow">View documentation</a>

</p><p><br />
</p>
<table id="toc" class="toc" summary="Contents"><tr><td><div id="toctitle"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1"><a href="#Basic_Queries_-_on_ontology"><span class="tocnumber">1</span> <span class="toctext">Basic Queries - on ontology</span></a>
<ul>
<li class="toclevel-2"><a href="#Find_terms_by_GO_ID"><span class="tocnumber">1.1</span> <span class="toctext">Find terms by GO ID</span></a></li>
<li class="toclevel-2"><a href="#Find_terms_by_.28preferred.29_name"><span class="tocnumber">1.2</span> <span class="toctext">Find terms by (preferred) name</span></a></li>

<li class="toclevel-2"><a href="#Find_terms_by_synonym.2Falternate_label"><span class="tocnumber">1.3</span> <span class="toctext">Find terms by synonym/alternate label</span></a></li>
<li class="toclevel-2"><a href="#Find_ancestors_of_the_node_.27nucleus.27"><span class="tocnumber">1.4</span> <span class="toctext">Find ancestors of the node 'nucleus'</span></a></li>
<li class="toclevel-2"><a href="#Find_descendants_of_the_node_.27nucleus.27"><span class="tocnumber">1.5</span> <span class="toctext">Find descendants of the node 'nucleus'</span></a></li>
<li class="toclevel-2"><a href="#I_can.27t_find_a_GO_ID_in_the_database"><span class="tocnumber">1.6</span> <span class="toctext">I can't find a GO ID in the database</span></a>
<ul>

<li class="toclevel-3"><a href="#Terms_by_alternate_ID"><span class="tocnumber">1.6.1</span> <span class="toctext">Terms by alternate ID</span></a></li>
<li class="toclevel-3"><a href="#Obsolete_terms"><span class="tocnumber">1.6.2</span> <span class="toctext">Obsolete terms</span></a></li>
</ul>
</li>
</ul>
</li>
<li class="toclevel-1"><a href="#Basic_Queries_-_annotations"><span class="tocnumber">2</span> <span class="toctext">Basic Queries - annotations</span></a>
<ul>

<li class="toclevel-2"><a href="#All_genes_in_Drosophila_annotated_to_.27nucleus.27_.28including_transitive_indirect_annotations.29"><span class="tocnumber">2.1</span> <span class="toctext">All genes in Drosophila annotated to 'nucleus' (including transitive indirect annotations)</span></a></li>
<li class="toclevel-2"><a href="#Peptide_sequences_of_all_genes.2Fgene_products_annotated_to_.27pronucleus.27_.28including_transitive_indirect_annotations.29"><span class="tocnumber">2.2</span> <span class="toctext">Peptide sequences of all genes/gene products annotated to 'pronucleus' (including transitive indirect annotations)</span></a></li>
<li class="toclevel-2"><a href="#Annotations_by_gene_product"><span class="tocnumber">2.3</span> <span class="toctext">Annotations by gene product</span></a>
<ul>
<li class="toclevel-3"><a href="#Querying_by_gene_or_protein_symbol"><span class="tocnumber">2.3.1</span> <span class="toctext">Querying by gene or protein symbol</span></a></li>

<li class="toclevel-3"><a href="#Querying_by_gene_product_ID"><span class="tocnumber">2.3.2</span> <span class="toctext">Querying by gene product ID</span></a></li>
<li class="toclevel-3"><a href="#Querying_by_multiple_gene_product_IDs"><span class="tocnumber">2.3.3</span> <span class="toctext">Querying by multiple gene product IDs</span></a></li>
<li class="toclevel-3"><a href="#Querying_by_gene_product_.28UniProt.29"><span class="tocnumber">2.3.4</span> <span class="toctext">Querying by gene product (UniProt)</span></a></li>
<li class="toclevel-3"><a href="#Searching_by_sequence_dbxref"><span class="tocnumber">2.3.5</span> <span class="toctext">Searching by sequence dbxref</span></a></li>
</ul>

</li>
<li class="toclevel-2"><a href="#Dictyostelium_annotations_with_evidence_from_a_kinase_domain"><span class="tocnumber">2.4</span> <span class="toctext">Dictyostelium annotations with evidence from a kinase domain</span></a></li>
</ul>
</li>
<li class="toclevel-1"><a href="#Reports_.2F_Aggregate_Queries"><span class="tocnumber">3</span> <span class="toctext">Reports / Aggregate Queries</span></a>
<ul>
<li class="toclevel-2"><a href="#Total_terms_in_database_.28non-obsolete.29"><span class="tocnumber">3.1</span> <span class="toctext">Total terms in database (non-obsolete)</span></a></li>
<li class="toclevel-2"><a href="#Total_terms.2C_grouped_by_ontology_.28GO.2CMF.2CBP.29"><span class="tocnumber">3.2</span> <span class="toctext">Total terms, grouped by ontology (GO,MF,BP)</span></a></li>

<li class="toclevel-2"><a href="#Total_gene_products_in_database"><span class="tocnumber">3.3</span> <span class="toctext">Total gene products in database</span></a></li>
<li class="toclevel-2"><a href="#Total_gene_products.2C_grouped_by_DB_authority_.28FlyBase.2C_SGD.2C_UniProt....29"><span class="tocnumber">3.4</span> <span class="toctext">Total gene products, grouped by DB authority (FlyBase, SGD, UniProt...)</span></a></li>
<li class="toclevel-2"><a href="#Total_species_with_at_least_one_annotation"><span class="tocnumber">3.5</span> <span class="toctext">Total species with at least one annotation</span></a></li>
<li class="toclevel-2"><a href="#Total_species_with_at_least_one_non-IEA_annotation"><span class="tocnumber">3.6</span> <span class="toctext">Total species with at least one non-IEA annotation</span></a></li>
<li class="toclevel-2"><a href="#Total_gene_products_annotated.2C_grouped_by_species"><span class="tocnumber">3.7</span> <span class="toctext">Total gene products annotated, grouped by species</span></a></li>

<li class="toclevel-2"><a href="#Total_annotations.2C_grouped_by_species.2C_broken_down_by_evidence"><span class="tocnumber">3.8</span> <span class="toctext">Total annotations, grouped by species, broken down by evidence</span></a></li>
<li class="toclevel-2"><a href="#Total_annotations.2C_grouped_by_DB_authority_.28FlyBase.2C_SGD.2C_UniProt....29.2C_broken_down_by_evidence"><span class="tocnumber">3.9</span> <span class="toctext">Total annotations, grouped by DB authority (FlyBase, SGD, UniProt...), broken down by evidence</span></a></li>
<li class="toclevel-2"><a href="#Total_annotations.2C_grouped_by_DB_authority_.28FlyBase.2C_SGD.2C_UniProt....29.2C_broken_down_by_evidence_and_ontology"><span class="tocnumber">3.10</span> <span class="toctext">Total annotations, grouped by DB authority (FlyBase, SGD, UniProt...), broken down by evidence and ontology</span></a></li>
<li class="toclevel-2"><a href="#Average_distance_from_root.2C_by_DB_authority"><span class="tocnumber">3.11</span> <span class="toctext">Average distance from root, by DB authority</span></a></li>
<li class="toclevel-2"><a href="#All_terms.2C_with_gene_products_directly_annotated_to_them"><span class="tocnumber">3.12</span> <span class="toctext">All terms, with gene products directly annotated to them</span></a></li>

<li class="toclevel-2"><a href="#All_terms.2C_with_gene_products_directly_and_transitively_annotated_to_them"><span class="tocnumber">3.13</span> <span class="toctext">All terms, with gene products directly and transitively annotated to them</span></a></li>
</ul>
</li>
<li class="toclevel-1"><a href="#Complex_Queries"><span class="tocnumber">4</span> <span class="toctext">Complex Queries</span></a>
<ul>
<li class="toclevel-2"><a href="#Query_by_distance_to_root"><span class="tocnumber">4.1</span> <span class="toctext">Query by distance to root</span></a></li>
<li class="toclevel-2"><a href="#Query_by_distance_from_leaf"><span class="tocnumber">4.2</span> <span class="toctext">Query by distance from leaf</span></a></li>

<li class="toclevel-2"><a href="#Immune_response_gene_products_and_their_associated_cell_component_terms_in_human"><span class="tocnumber">4.3</span> <span class="toctext">Immune response gene products and their associated cell component terms in human</span></a></li>
<li class="toclevel-2"><a href="#Pairs_of_GO_terms_associated_via_IC_evidence"><span class="tocnumber">4.4</span> <span class="toctext">Pairs of GO terms associated via IC evidence</span></a></li>
<li class="toclevel-2"><a href="#Gene_products_that_support_other_associations"><span class="tocnumber">4.5</span> <span class="toctext">Gene products that support other associations</span></a></li>
<li class="toclevel-2"><a href="#Suspect_ISS_assignments"><span class="tocnumber">4.6</span> <span class="toctext">Suspect ISS assignments</span></a></li>
</ul>

</li>
<li class="toclevel-1"><a href="#See_Also"><span class="tocnumber">5</span> <span class="toctext">See Also</span></a></li>
</ul>
</td></tr></table><script type="text/javascript"> if (window.showTocToggle) { var tocShowText = "show"; var tocHideText = "hide"; showTocToggle(); } </script>
<a name="Basic_Queries_-_on_ontology"></a><h2><span class="editsection">[<a href="/index.php?title=Example_Queries&amp;action=edit&amp;section=1" title="Edit section: Basic Queries - on ontology">edit</a>]</span> <span class="mw-headline">Basic Queries - on ontology</span></h2>
<a name="Find_terms_by_GO_ID"></a><h3><span class="editsection">[<a href="/index.php?title=Example_Queries&amp;action=edit&amp;section=2" title="Edit section: Find terms by GO ID">edit</a>]</span> <span class="mw-headline">Find terms by GO ID</span></h3>

<p>Given a GO ID, find out information on this term:
</p>
<pre> SELECT * FROM term WHERE acc='GO:0005634';
</pre>
<a name="Find_terms_by_.28preferred.29_name"></a><h3><span class="editsection">[<a href="/index.php?title=Example_Queries&amp;action=edit&amp;section=3" title="Edit section: Find terms by (preferred) name">edit</a>]</span> <span class="mw-headline">Find terms by (preferred) name</span></h3>
<pre> SELECT * FROM term WHERE name='nucleus';
</pre>
<a name="Find_terms_by_synonym.2Falternate_label"></a><h3><span class="editsection">[<a href="/index.php?title=Example_Queries&amp;action=edit&amp;section=4" title="Edit section: Find terms by synonym/alternate label">edit</a>]</span> <span class="mw-headline">Find terms by synonym/alternate label</span></h3>

<pre> SELECT * FROM term INNER JOIN term_synonym ON (term.id=term_synonym.term_id)
 WHERE term_synonym LIKE 'protein biosynth%';
</pre>
<a name="Find_ancestors_of_the_node_.27nucleus.27"></a><h3><span class="editsection">[<a href="/index.php?title=Example_Queries&amp;action=edit&amp;section=5" title="Edit section: Find ancestors of the node 'nucleus'">edit</a>]</span> <span class="mw-headline">Find ancestors of the node 'nucleus'</span></h3>
<pre> SELECT DISTINCT
        ancestor.*, 
        graph_path.distance,
        graph_path.term1_id AS ancestor_id
 FROM 
  term
  INNER JOIN graph_path ON (term.id=graph_path.term2_id)
  INNER JOIN term AS ancestor ON (ancestor.id=graph_path.term1_id)
 WHERE term.name='nucleus';
</pre>
<p>Note that if there are alternate paths of differing length, this query will report a separate row for each term-ancestor-distance combination. To only report ancestors once, remove <i>graph_path.distance</i> from the SELECT clause
</p>

<ul><li> see also: <a href="http://www.geneontology.org/GO.database.schema-with-views.shtml#go-graph-views.view.term-ancestor" class="external text" title="http://www.geneontology.org/GO.database.schema-with-views.shtml#go-graph-views.view.term-ancestor" rel="nofollow">view</a>
</li></ul>
<p>For some reason the following works better on mysql v 5.0.26
</p>
<pre>SELECT ancestor.*, 
       graph_path.distance,
       graph_path.term1_id AS ancestor_id
FROM 
 term child, graph_path, term ancestor
WHERE
child.id=graph_path.term2_id
AND ancestor.id=graph_path.term1_id
AND child.name='nucleus';
</pre>
<a name="Find_descendants_of_the_node_.27nucleus.27"></a><h3><span class="editsection">[<a href="/index.php?title=Example_Queries&amp;action=edit&amp;section=6" title="Edit section: Find descendants of the node 'nucleus'">edit</a>]</span> <span class="mw-headline">Find descendants of the node 'nucleus'</span></h3>
<pre>SELECT DISTINCT descendant.acc, descendant.name, descendant.term_type
FROM
 term
 INNER JOIN graph_path ON (term.id=graph_path.term1_id)
 INNER JOIN term AS descendant ON (descendant.id=graph_path.term2_id)
WHERE term.name='nucleus' AND distance &lt;&gt; 0

</pre>
<a name="I_can.27t_find_a_GO_ID_in_the_database"></a><h3><span class="editsection">[<a href="/index.php?title=Example_Queries&amp;action=edit&amp;section=7" title="Edit section: I can't find a GO ID in the database">edit</a>]</span> <span class="mw-headline">I can't find a GO ID in the database</span></h3>
<p>There are a number of possibilities
</p>
<a name="Terms_by_alternate_ID"></a><h4><span class="editsection">[<a href="/index.php?title=Example_Queries&amp;action=edit&amp;section=8" title="Edit section: Terms by alternate ID">edit</a>]</span> <span class="mw-headline">Terms by alternate ID</span></h4>
<p>Example scenario:
</p><p>A GO term has been merged with another term. The previous ID now becomes a secondary ID. It can be searched like this:

</p>
<pre> SELECT
   term.*
 FROM
   term
   INNER JOIN term_synonym ON (term.id=term_synonym.term_id)
 WHERE
   acc_synonym='GO:0008151';
</pre>
<p>This finds GO:0008151 "cellular process", which has GO:0008151 as an alternate ID
</p>
<a name="Obsolete_terms"></a><h4><span class="editsection">[<a href="/index.php?title=Example_Queries&amp;action=edit&amp;section=9" title="Edit section: Obsolete terms">edit</a>]</span> <span class="mw-headline">Obsolete terms</span></h4>
<p>Obsolete terms are stored in the term table, with <b>is_obsolete</b> set to 1.
</p><p>To find all obsolete terms:

</p>
<pre> SELECT *
 FROM term
 WHERE is_obsolete=1;
</pre>
<p>Total number of obsolete terms:
</p>
<pre> SELECT count(*) FROM term WHERE is_obsolete=1;
</pre>
<a name="Basic_Queries_-_annotations"></a><h2><span class="editsection">[<a href="/index.php?title=Example_Queries&amp;action=edit&amp;section=10" title="Edit section: Basic Queries - annotations">edit</a>]</span> <span class="mw-headline">Basic Queries - annotations</span></h2>
<a name="All_genes_in_Drosophila_annotated_to_.27nucleus.27_.28including_transitive_indirect_annotations.29"></a><h3><span class="editsection">[<a href="/index.php?title=Example_Queries&amp;action=edit&amp;section=11" title="Edit section: All genes in Drosophila annotated to 'nucleus' (including transitive indirect annotations)">edit</a>]</span> <span class="mw-headline">All genes in Drosophila annotated to 'nucleus' (including transitive indirect annotations)</span></h3>

<pre>SELECT
 term.name AS superterm_name,
 term.acc AS superterm_acc,
 term.term_type AS superterm_type,
 association.*,
 gene_product.symbol AS gp_symbol,
 gene_product.symbol AS gp_full_name,
 dbxref.xref_dbname AS gp_dbname,
 dbxref.xref_key AS gp_acc,
 species.*
FROM term
 INNER JOIN graph_path ON (term.id=graph_path.term1_id)
 INNER JOIN association ON (graph_path.term2_id=association.term_id)
 INNER JOIN gene_product ON (association.gene_product_id=gene_product.id)
 INNER JOIN species ON (gene_product.species_id=species.id)
 INNER JOIN dbxref ON (gene_product.dbxref_id=dbxref.id)
WHERE
 term.name = 'nucleus'
 AND
 species.genus = 'Drosophila';
</pre>
<p>If you have mysql5 you can use a view to make this easier:
</p>
<pre>SELECT * FROM term_J_association_J_gene_product_via_graph
WHERE superterm_name ='nucleus';
</pre>
<ul><li> See <a href="http://www.geneontology.org/GO.database.schema-with-views.shtml#go-prejoined-views.view.term-j-association-j-gene-product-via-graph" class="external text" title="http://www.geneontology.org/GO.database.schema-with-views.shtml#go-prejoined-views.view.term-j-association-j-gene-product-via-graph" rel="nofollow">view</a>
</li></ul>
<a name="Peptide_sequences_of_all_genes.2Fgene_products_annotated_to_.27pronucleus.27_.28including_transitive_indirect_annotations.29"></a><h3><span class="editsection">[<a href="/index.php?title=Example_Queries&amp;action=edit&amp;section=12" title="Edit section: Peptide sequences of all genes/gene products annotated to 'pronucleus' (including transitive indirect annotations)">edit</a>]</span> <span class="mw-headline">Peptide sequences of all genes/gene products annotated to 'pronucleus' (including transitive indirect annotations)</span></h3>

<pre>SELECT
 gene_product.symbol AS gp_symbol,
 dbxref.xref_dbname,
 dbxref.xref_key,
 seq.seq
FROM term
 INNER JOIN graph_path ON (term.id=graph_path.term1_id)
 INNER JOIN association ON (graph_path.term2_id=association.term_id)
 INNER JOIN gene_product ON (association.gene_product_id=gene_product.id)
 INNER JOIN dbxref ON (gene_product.dbxref_id=dbxref.id)
 INNER JOIN gene_product_seq ON (gene_product.id=gene_product_seq.gene_product_id)
 INNER JOIN seq ON (gene_product_seq.seq_id=seq.id)
WHERE
 term.name = 'pronucleus'
 AND association.is_not=0;
</pre>
<a name="Annotations_by_gene_product"></a><h3><span class="editsection">[<a href="/index.php?title=Example_Queries&amp;action=edit&amp;section=13" title="Edit section: Annotations by gene product">edit</a>]</span> <span class="mw-headline">Annotations by gene product</span></h3>
<a name="Querying_by_gene_or_protein_symbol"></a><h4><span class="editsection">[<a href="/index.php?title=Example_Queries&amp;action=edit&amp;section=14" title="Edit section: Querying by gene or protein symbol">edit</a>]</span> <span class="mw-headline">Querying by gene or protein symbol</span></h4>
<p>Finding gene products in the database with symbol 'BRCA1':
</p>
<pre> SELECT
   *
 FROM
   gene_product
   INNER JOIN dbxref ON (gene_product.dbxref_id=dbxref.id)
   INNER JOIN species ON (gene_product.species_id=species.id)
 WHERE
   symbol = 'BRCA1';

</pre>
<p>The search is case-insensitive (a MySQL default), so it will find mouse genes with symbol "Brca1"
</p><p>Note that this search is probably not sensitive enough - different contributing databases to GO use different naming conventions. We can broaden the search with a text match:
</p>
<pre> SELECT
   *
 FROM
   gene_product
   INNER JOIN dbxref ON (gene_product.dbxref_id=dbxref.id)
   INNER JOIN species ON (gene_product.species_id=species.id)
 WHERE
   symbol like 'BRCA1%';
</pre>
<p>We can see that this search includes a record for a gene with symbol BRCA1_HUMAN (this is the convention of the contributing UniProt database)
</p><p>We can also retrieve the GO terms attached:
</p>
<pre> SELECT
  gene_product.symbol,
  gene_product.full_name,
  dbxref.xref_dbname,
  dbxref.xref_key,
  species.genus,
  species.species,
  association.is_not,
  evidence.code,
  term.acc,
  term.name
 FROM   gene_product
  INNER JOIN dbxref ON (gene_product.dbxref_id=dbxref.id)
  INNER JOIN species ON (gene_product.species_id=species.id)
  INNER JOIN association ON (gene_product.id=association.gene_product_id)
  INNER JOIN evidence ON (association.id=evidence.association_id)
  INNER JOIN term ON (association.term_id=term.id)
 WHERE
   gene_product.symbol like 'BRCA1%';
</pre>
<a name="Querying_by_gene_product_ID"></a><h4><span class="editsection">[<a href="/index.php?title=Example_Queries&amp;action=edit&amp;section=15" title="Edit section: Querying by gene product ID">edit</a>]</span> <span class="mw-headline">Querying by gene product ID</span></h4>

<p>Each gene product is uniquely identified by a bipartite database-accession pair referenced in the gene_product.dbxref_id field; see
</p>
<ul><li> <a href="http://www.geneontology.org/GO.database.schema.shtml#go-associations.table.gene-product" class="external free" title="http://www.geneontology.org/GO.database.schema.shtml#go-associations.table.gene-product" rel="nofollow">http://www.geneontology.org/GO.database.schema.shtml#go-associations.table.gene-product</a>
</li><li> <a href="http://www.geneontology.org/GO.format.annotation.shtml" class="external free" title="http://www.geneontology.org/GO.format.annotation.shtml" rel="nofollow">http://www.geneontology.org/GO.format.annotation.shtml</a> (cols 1 and 2)
</li></ul>
<p>to retrieve by this field:
</p>
<pre>SELECT
  gene_product.symbol,
  gene_product.full_name,
  dbxref.xref_dbname,
  dbxref.xref_key,
  species.genus,
  species.species,
  association.is_not,
  evidence.code,
  term.acc,
  term.name
 FROM   gene_product
  INNER JOIN dbxref ON (gene_product.dbxref_id=dbxref.id)
  INNER JOIN species ON (gene_product.species_id=species.id)
  INNER JOIN association ON (gene_product.id=association.gene_product_id)
  INNER JOIN evidence ON (association.id=evidence.association_id)
  INNER JOIN term ON (association.term_id=term.id)
 WHERE
   dbxref.xref_key = 'FBgn0000490'
 AND
   dbxref.xref_dbname = 'FB';
</pre>
<p>this retrieves all annotations for Dmel decapentaplegic gene
</p>
<a name="Querying_by_multiple_gene_product_IDs"></a><h4><span class="editsection">[<a href="/index.php?title=Example_Queries&amp;action=edit&amp;section=16" title="Edit section: Querying by multiple gene product IDs">edit</a>]</span> <span class="mw-headline">Querying by multiple gene product IDs</span></h4>

<pre>SELECT
  gene_product.symbol,
  gene_product.full_name,
  dbxref.xref_dbname,
  dbxref.xref_key,
  species.genus,
  species.species,
  association.is_not,
  evidence.code,
  term.acc,
  term.name
 FROM   gene_product
  INNER JOIN dbxref ON (gene_product.dbxref_id=dbxref.id)
  INNER JOIN species ON (gene_product.species_id=species.id)
  INNER JOIN association ON (gene_product.id=association.gene_product_id)
  INNER JOIN evidence ON (association.id=evidence.association_id)
  INNER JOIN term ON (association.term_id=term.id)
 WHERE
   dbxref.xref_key IN 
     ('FBgn0000490','FBgn0015567','FBgn0003470')
 AND
   dbxref.xref_dbname = 'FB';
</pre>
<a name="Querying_by_gene_product_.28UniProt.29"></a><h4><span class="editsection">[<a href="/index.php?title=Example_Queries&amp;action=edit&amp;section=17" title="Edit section: Querying by gene product (UniProt)">edit</a>]</span> <span class="mw-headline">Querying by gene product (UniProt)</span></h4>
<p>UniProt contribute annotations to both humans and other organisms; prior to building the database, annotations are filtered to avoid redundancy with Model Organism Database (MOD) contributing annotations.
</p><p>In general you should try and use the unique UniProt ID:
</p>
<pre>SELECT
  gene_product.symbol,
  gene_product.full_name,
  dbxref.xref_dbname,
  dbxref.xref_key,
  species.genus,
  species.species,
  association.is_not,
  evidence.code,
  term.acc,
  term.name
 FROM   gene_product
  INNER JOIN dbxref ON (gene_product.dbxref_id=dbxref.id)
  INNER JOIN species ON (gene_product.species_id=species.id)
  INNER JOIN association ON (gene_product.id=association.gene_product_id)
  INNER JOIN evidence ON (association.id=evidence.association_id)
  INNER JOIN term ON (association.term_id=term.id)
 WHERE
   dbxref.xref_key = 'P38398';
</pre>
<p>Human BRCA1 annotations
</p>
<a name="Searching_by_sequence_dbxref"></a><h4><span class="editsection">[<a href="/index.php?title=Example_Queries&amp;action=edit&amp;section=18" title="Edit section: Searching by sequence dbxref">edit</a>]</span> <span class="mw-headline"> Searching by sequence dbxref </span></h4>

<p>A gene product record may be associated with multiple other identifiers through it's sequence record. For example, the mouse gene Tpm2 (identified in the MGI database as MGI:98810) is associated with the protein sequence record P58774 in UniProt.
</p>
<pre>SELECT
  gene_product.symbol,
  gene_product.full_name,
  dbxref.xref_dbname,
  dbxref.xref_key,
  alt_dbxref.xref_dbname,
  alt_dbxref.xref_key,
  species.genus,
  species.species,
  association.is_not,
  evidence.code,
  term.acc,
  term.name
 FROM   gene_product
  INNER JOIN dbxref ON (gene_product.dbxref_id=dbxref.id)
  INNER JOIN gene_product_seq ON (gene_product.id=gene_product_seq.gene_product_id)
  INNER JOIN seq_dbxref ON (gene_product_seq.seq_id=seq_dbxref.seq_id)
  INNER JOIN dbxref AS alt_dbxref ON (seq_dbxref.dbxref_id=alt_dbxref.id)
  INNER JOIN species ON (gene_product.species_id=species.id)
  INNER JOIN association ON (gene_product.id=association.gene_product_id)
  INNER JOIN evidence ON (association.id=evidence.association_id)
  INNER JOIN term ON (association.term_id=term.id)
 WHERE
   alt_dbxref.xref_key = 'P58774';
</pre>
<p>This can be the source of some confusion: there was at one point a UniProt-contributed annotation to P58774 (UniProt symbol TPM2_MOUSE). This was superseded by the MGI annotation - but the annotations are still linked to the UniProt record via the seq table.
</p>
<a name="Dictyostelium_annotations_with_evidence_from_a_kinase_domain"></a><h3><span class="editsection">[<a href="/index.php?title=Example_Queries&amp;action=edit&amp;section=19" title="Edit section: Dictyostelium annotations with evidence from a kinase domain">edit</a>]</span> <span class="mw-headline"> Dictyostelium annotations with evidence from a kinase domain </span></h3>
<pre>SELECT
 gene_product.symbol,
 gene_product.full_name,
 dbxref.xref_dbname,
 dbxref.xref_key,
 species.genus,
 species.species,
 association.is_not,
 evidence.code,
 ex.xref_dbname AS with_dbname,
 ex.xref_key    AS with_acc,
 term.acc,
 term.term_type,
 term.name
FROM   gene_product
 INNER JOIN dbxref ON (gene_product.dbxref_id=dbxref.id)
 INNER JOIN species ON (gene_product.species_id=species.id)
 INNER JOIN association ON (gene_product.id=association.gene_product_id)
 INNER JOIN evidence ON (association.id=evidence.association_id)
 INNER JOIN evidence_dbxref ON (evidence.id=evidence_dbxref.evidence_id)
 INNER JOIN dbxref AS ex ON (evidence_dbxref.dbxref_id=ex.id)
 INNER JOIN term ON (association.term_id=term.id)
WHERE
  ex.xref_key='IPR000719'
 AND
  genus='Dictyostelium';
</pre>
<a name="Reports_.2F_Aggregate_Queries"></a><h2><span class="editsection">[<a href="/index.php?title=Example_Queries&amp;action=edit&amp;section=20" title="Edit section: Reports / Aggregate Queries">edit</a>]</span> <span class="mw-headline">Reports / Aggregate Queries</span></h2>

<p>In SQL, queries that perform some operation over a collection of records, such as summation, averages etc are known as <i>aggregate</i> queries. These are useful for generating reports
</p>
<a name="Total_terms_in_database_.28non-obsolete.29"></a><h3><span class="editsection">[<a href="/index.php?title=Example_Queries&amp;action=edit&amp;section=21" title="Edit section: Total terms in database (non-obsolete)">edit</a>]</span> <span class="mw-headline">Total terms in database (non-obsolete)</span></h3>
<pre> SELECT count(*)
 FROM   term
 WHERE is_obsolete=0;
</pre>
<a name="Total_terms.2C_grouped_by_ontology_.28GO.2CMF.2CBP.29"></a><h3><span class="editsection">[<a href="/index.php?title=Example_Queries&amp;action=edit&amp;section=22" title="Edit section: Total terms, grouped by ontology (GO,MF,BP)">edit</a>]</span> <span class="mw-headline">Total terms, grouped by ontology (GO,MF,BP)</span></h3>

<pre> SELECT term_type AS ontology,
        count(*) AS n_terms
 FROM   term
 WHERE  is_obsolete=0
 GROUP BY term_type;
</pre>
<p>note: this will give you a few additional ontologies that are not used directly for gene_product annotation, but are used for bookkeeping by the database
</p>
<a name="Total_gene_products_in_database"></a><h3><span class="editsection">[<a href="/index.php?title=Example_Queries&amp;action=edit&amp;section=23" title="Edit section: Total gene products in database">edit</a>]</span> <span class="mw-headline">Total gene products in database</span></h3>
<pre>SELECT count(*)
FROM   gene_product;
</pre>
<a name="Total_gene_products.2C_grouped_by_DB_authority_.28FlyBase.2C_SGD.2C_UniProt....29"></a><h3><span class="editsection">[<a href="/index.php?title=Example_Queries&amp;action=edit&amp;section=24" title="Edit section: Total gene products, grouped by DB authority (FlyBase, SGD, UniProt...)">edit</a>]</span> <span class="mw-headline">Total gene products, grouped by DB authority (FlyBase, SGD, UniProt...)</span></h3>

<pre>SELECT xref_dbname, count(DISTINCT gene_product.id)
FROM   gene_product INNER JOIN dbxref ON (gene_product.dbxref_id=dbxref.id)
GROUP BY xref_dbname;
</pre>
<ul><li> See <a href="http://www.geneontology.org/GO.database.schema-with-views.shtml#go-annotation-reports.view.gene-product-total-by-dbname" class="external text" title="http://www.geneontology.org/GO.database.schema-with-views.shtml#go-annotation-reports.view.gene-product-total-by-dbname" rel="nofollow">view</a>
</li></ul>
<a name="Total_species_with_at_least_one_annotation"></a><h3><span class="editsection">[<a href="/index.php?title=Example_Queries&amp;action=edit&amp;section=25" title="Edit section: Total species with at least one annotation">edit</a>]</span> <span class="mw-headline">Total species with at least one annotation</span></h3>
<pre> SELECT count(DISTINCT species_id)
 FROM   gene_product;
</pre>
<p>(at present, the db contains no gene products that have not been annotated, so we do not need to join with the annotation table)

</p>
<a name="Total_species_with_at_least_one_non-IEA_annotation"></a><h3><span class="editsection">[<a href="/index.php?title=Example_Queries&amp;action=edit&amp;section=26" title="Edit section: Total species with at least one non-IEA annotation">edit</a>]</span> <span class="mw-headline">Total species with at least one non-IEA annotation</span></h3>
<pre> SELECT count(DISTINCT species_id)
 FROM   gene_product
  INNER JOIN association ON (gene_product.id=association.gene_product_id)
  INNER JOIN evidence ON (association.id=evidence.association_id)
 WHERE
  evidence.code&nbsp;!= 'IEA';
</pre>
<p>NOTE: if you have the godb views installed, this query is simpler:
</p>
<pre> SELECT count(DISTINCT species_id)
 FROM  association_J_evidence_J_gene_product
 WHERE code&nbsp;!= 'IEA';
</pre>

<a name="Total_gene_products_annotated.2C_grouped_by_species"></a><h3><span class="editsection">[<a href="/index.php?title=Example_Queries&amp;action=edit&amp;section=27" title="Edit section: Total gene products annotated, grouped by species">edit</a>]</span> <span class="mw-headline">Total gene products annotated, grouped by species</span></h3>
<p>This query excludes species that have only a couple of gene products annotated to them, in order to get the results to a manageable size
</p>
<pre>SELECT species.common_name, species.genus, species.species, count(*) AS n_gps
FROM   gene_product INNER JOIN species ON (gene_product.species_id=species.id)
GROUP BY species.common_name, species.genus, species.species
HAVING n_gps &gt; 10;
</pre>
<p>Here we introduce a <i>HAVING</i> clause - this is because we cannot use a <i>WHERE</i> clause on the results of an aggregate function

</p>
<a name="Total_annotations.2C_grouped_by_species.2C_broken_down_by_evidence"></a><h3><span class="editsection">[<a href="/index.php?title=Example_Queries&amp;action=edit&amp;section=28" title="Edit section: Total annotations, grouped by species, broken down by evidence">edit</a>]</span> <span class="mw-headline">Total annotations, grouped by species, broken down by evidence</span></h3>
<pre> SELECT species.ncbi_taxa_id,  species.common_name,  evidence.code,  count(distinct association.id) AS evidence__association_count
 FROM species
  INNER JOIN gene_product ON (gene_product.species_id = species.id)
  INNER JOIN association ON (association.gene_product_id = gene_product.id)
  INNER JOIN evidence ON (evidence.association_id = association.id)
 GROUP BY  species.ncbi_taxa_id,  species.common_name,  evidence.code
 ORDER BY  species.ncbi_taxa_id,  species.common_name,  evidence.code 
</pre>
<a name="Total_annotations.2C_grouped_by_DB_authority_.28FlyBase.2C_SGD.2C_UniProt....29.2C_broken_down_by_evidence"></a><h3><span class="editsection">[<a href="/index.php?title=Example_Queries&amp;action=edit&amp;section=29" title="Edit section: Total annotations, grouped by DB authority (FlyBase, SGD, UniProt...), broken down by evidence">edit</a>]</span> <span class="mw-headline">Total annotations, grouped by DB authority (FlyBase, SGD, UniProt...), broken down by evidence</span></h3>
<pre>SELECT xref_dbname, evidence.code, count(DISTINCT association.id)
FROM   gene_product
 INNER JOIN dbxref ON (gene_product.dbxref_id=dbxref.id)
 INNER JOIN association ON (gene_product.id=association.gene_product_id)
 INNER JOIN evidence ON (association.id=evidence.association_id)
GROUP BY xref_dbname, evidence.code;

</pre>
<p><br /> 
</p>
<a name="Total_annotations.2C_grouped_by_DB_authority_.28FlyBase.2C_SGD.2C_UniProt....29.2C_broken_down_by_evidence_and_ontology"></a><h3><span class="editsection">[<a href="/index.php?title=Example_Queries&amp;action=edit&amp;section=30" title="Edit section: Total annotations, grouped by DB authority (FlyBase, SGD, UniProt...), broken down by evidence and ontology">edit</a>]</span> <span class="mw-headline">Total annotations, grouped by DB authority (FlyBase, SGD, UniProt...), broken down by evidence and ontology</span></h3>
<pre>SELECT xref_dbname, term.term_type, evidence.code, count(DISTINCT association.id)
FROM   gene_product
 INNER JOIN dbxref ON (gene_product.dbxref_id=dbxref.id)
 INNER JOIN association ON (gene_product.id=association.gene_product_id)
 INNER JOIN evidence ON (association.id=evidence.association_id)
 INNER JOIN term ON (association.term_id=term.id)
GROUP BY xref_dbname, term.term_type,evidence.code;
</pre>
<a name="Average_distance_from_root.2C_by_DB_authority"></a><h3><span class="editsection">[<a href="/index.php?title=Example_Queries&amp;action=edit&amp;section=31" title="Edit section: Average distance from root, by DB authority">edit</a>]</span> <span class="mw-headline">Average distance from root, by DB authority</span></h3>

<p>Warning: this statistic may be misleading; see below
</p>
<pre>SELECT xref_dbname, avg(distance) AS avg_dist_from_root
FROM   gene_product
 INNER JOIN dbxref ON (gene_product.dbxref_id=dbxref.id)
 INNER JOIN association ON (gene_product.id=association.gene_product_id)
 INNER JOIN graph_path ON (graph_path.term2_id=association.term_id)
 INNER JOIN term AS root ON (graph_path.term1_id=root.id)
WHERE
 is_root=1 AND distance&gt;1
GROUP BY xref_dbname;
</pre>
<p>This is just meant to illustrate how certain kinds of data mining can be performed. Results may be partially meaningless - depth is measured as the number of links between a term and the root. This is not necessarily a meaningful measure of specificity. Most terms have multiple paths to root; in the above query, global averages are calculated, which means results will be biased in favour of certain kinds of terms (for example, many biosynthetic pathway type terms like "cysteine biosynthesis" are both deep in the graph, and have multiple paths, meaning groups that annotate organisms with a heavy bias to these kind of terms will score higher)
</p><p>A better approach is to first find the average depth per term, and then average over that on a per annotation basis.
</p><p>Better yet is to do an analysis based on information content - the above is crude and is for illustrating complex aggregate queries.
</p><p><br />
</p>
<a name="All_terms.2C_with_gene_products_directly_annotated_to_them"></a><h3><span class="editsection">[<a href="/index.php?title=Example_Queries&amp;action=edit&amp;section=32" title="Edit section: All terms, with gene products directly annotated to them">edit</a>]</span> <span class="mw-headline">All terms, with gene products directly annotated to them</span></h3>
<p>Warning: expensive query
Warning: will generate ~20,000 rows

</p>
<pre>SELECT term.acc, term.name, count(DISTINCT gene_product_id)
FROM   term INNER JOIN association ON (term.id=association.term_id)
GROUP BY term.acc, term.name;
</pre>
<a name="All_terms.2C_with_gene_products_directly_and_transitively_annotated_to_them"></a><h3><span class="editsection">[<a href="/index.php?title=Example_Queries&amp;action=edit&amp;section=33" title="Edit section: All terms, with gene products directly and transitively annotated to them">edit</a>]</span> <span class="mw-headline">All terms, with gene products directly and transitively annotated to them</span></h3>
<p>Warning: expensive query
Warning: will generate ~20,000 rows
</p><p>As above, but includes transitive annotations; eg if GP is annotated to X, and X is a beneath Y in the graph, GP is transitively annotated to Y.
</p>
<pre>SELECT term.acc, term.name, count(DISTINCT gene_product_id)
FROM   term INNER JOIN graph_path ON (term.id=graph_path.term1_id)
            INNER JOIN association ON (graph_path.term2_id=association.term_id)
GROUP BY term.acc, term.name;
</pre>
<p>Note that the above information is already pre-calculated in the database, for non-IEA annotations. The info is partitioned by the contributing database (speciesdb), which means it is additive. See:
</p><p><a href="http://www.geneontology.org/GO.database.schema.shtml#go-optimisations.table.gene-product-count" class="external free" title="http://www.geneontology.org/GO.database.schema.shtml#go-optimisations.table.gene-product-count" rel="nofollow">http://www.geneontology.org/GO.database.schema.shtml#go-optimisations.table.gene-product-count</a>

</p>
<pre> SELECT term.acc, term.name, code, SUM(gene_product_count.product_count) AS pc
 FROM   term INNER JOIN gene_product_count ON (term.id = gene_product_count.term_id)
 GROUP BY term.acc, term.name, code;
</pre>
<a name="Complex_Queries"></a><h2><span class="editsection">[<a href="/index.php?title=Example_Queries&amp;action=edit&amp;section=34" title="Edit section: Complex Queries">edit</a>]</span> <span class="mw-headline">Complex Queries</span></h2>
<a name="Query_by_distance_to_root"></a><h3><span class="editsection">[<a href="/index.php?title=Example_Queries&amp;action=edit&amp;section=35" title="Edit section: Query by distance to root">edit</a>]</span> <span class="mw-headline">Query by distance to root</span></h3>
<ul><li>Caveat: Note that GO is structured as a DAG and thus there are typically multiple paths-to-root. Thus a term may have more than one 'depth'

</li></ul>
<ul><li>Caveat: The depth of a node or distance between nodes is not necessarily biologically meaningful. Other more advanced queries are required to get biologially meaningful information-theory based distances between terms
</li></ul>
<p>This query finds all terms together with their depths - if a term is found at paths with different depths, it will be listed twice
</p>
<pre> SELECT DISTINCT
   term.*,
   p.distance
 FROM
   term
   INNER JOIN graph_path AS p ON (p.term2_id=term.id)
   INNER JOIN term AS root ON (p.term1_id=root.id)
 WHERE
   root.is_root=1;
</pre>
<p>You can constrain this by adding constraints to the WHERE clause; eg
</p>
<pre>  AND term.name like 'membrane%';
</pre>
<ul><li> Caveat: at the time of writing, the GO database inserts an additional fake 'root' above the 3 actual root nodes of GO. Thus the distance should be taken as being to this fake root and not the actual root for the particular ontology (function, process, component)
</li></ul>
<p>An aggregate form of this query allows us to find the <b>maximum</b> distance to root for each term. 

</p>
<pre> SELECT DISTINCT
   term.acc,
   term.name,
   term.term_type,
   max(p.distance)
 FROM
   term
   INNER JOIN graph_path AS p ON (p.term2_id=term.id)
   INNER JOIN term AS root ON (p.term1_id=root.id)
 WHERE
   root.is_root=1
   AND term.is_obsolete=0
 GROUP BY
   term.acc,
   term.name,
   term.term_type;
</pre>
<p>Note that other aggregate functions such as <i>min</i> or <i>avg</i> could be used in place of <i>max</i> in the above.
</p><p><br />
</p>
<a name="Query_by_distance_from_leaf"></a><h3><span class="editsection">[<a href="/index.php?title=Example_Queries&amp;action=edit&amp;section=36" title="Edit section: Query by distance from leaf">edit</a>]</span> <span class="mw-headline">Query by distance from leaf</span></h3>

<a name="Immune_response_gene_products_and_their_associated_cell_component_terms_in_human"></a><h3><span class="editsection">[<a href="/index.php?title=Example_Queries&amp;action=edit&amp;section=37" title="Edit section: Immune response gene products and their associated cell component terms in human">edit</a>]</span> <span class="mw-headline">Immune response gene products and their associated cell component terms in human</span></h3>
<p>We want genes annotated at-or-below <i>immune reponse</i>, together with their associated directly annotated terms in CC
</p>
<pre> SELECT
  term1_acc  AS process_acc, 
  term1_name AS process_name,
  gp_symbol, 
  term2_acc  AS cc_acc, 
  term2_name AS cc_name 
 FROM 
  gene_product_with_term_pair_via_graph 
  INNER JOIN species ON (gp_species_id=species.id)
 WHERE 
  superterm_name='immune response' AND 
  species.common_name='human'      AND 
  is_not=0                         AND 
  association2_is_not=0            AND 
  term2_type='cellular_component';
</pre>
<p>Note we exclude negative annotations
</p>
<a name="Pairs_of_GO_terms_associated_via_IC_evidence"></a><h3><span class="editsection">[<a href="/index.php?title=Example_Queries&amp;action=edit&amp;section=38" title="Edit section: Pairs of GO terms associated via IC evidence">edit</a>]</span> <span class="mw-headline">Pairs of GO terms associated via IC evidence</span></h3>

<p>The IC evidence code (Inferred by Curator) is typically used in conjunction with a GO ID as evidence (in the 'with' field). This is typically used when a curator makes a cross-ontology inference, eg if a process is known to always take place in the nucleus, then an additional annotation is made to nucleus with the process GO ID in the evidence with column.
</p>
<pre> SELECT DISTINCT
       term.acc,
       term.term_type,
       term.name,
       term2.acc AS acc2,
       term2.term_type AS term_type2,
       term2.name AS name2
 FROM evidence_IC AS ic 
       INNER JOIN evidence_dbxref AS ex ON (ic.id=evidence_id)
       INNER JOIN dbxref ON (ex.dbxref_id=dbxref.id)
       INNER JOIN association AS a ON (a.id=ic.association_id)
       INNER JOIN term ON (a.term_id=term.id) 
       INNER JOIN term AS term2 ON (concat(xref_dbname,':',xref_key) = term2.acc);
</pre>
<p>(See also the view <i>term_pair_by_IC</i>)
</p><p>Note the slightly contorted way of getting the second term via a mysql concat; this is because the evidence <i>with</i> field is stored in the dbxref table which splits the bipartite identifier; on the other hand the term table stores this in a single column.
</p>
<a name="Gene_products_that_support_other_associations"></a><h3><span class="editsection">[<a href="/index.php?title=Example_Queries&amp;action=edit&amp;section=39" title="Edit section: Gene products that support other associations">edit</a>]</span> <span class="mw-headline">Gene products that support other associations</span></h3>

<p>The following query finds associations that are based on an ISS from FlyBase
</p>
<pre> SELECT
   px_src.xref_dbname  AS src_db,
   px_src.xref_key     AS src_acc,
   p_src.symbol        AS src_symbol,
   px_der.xref_dbname  AS der_db,
   px_der.xref_key     AS der_acc,
   p_der.symbol        AS der_symbol,
   a_der.is_not        AS der_is_not,
   aqt_der.name        AS der_qual,
   t_der.acc           AS der_term_acc,
   t_der.name          AS der_term_name,
   e_der.code          AS der_code
 FROM
   gene_product AS p_src
   INNER JOIN dbxref AS px_src ON (p_src.dbxref_id=px_src.id)
   INNER JOIN evidence_dbxref AS ex_der ON (ex_der.dbxref_id=p_src.dbxref_id)
   INNER JOIN evidence AS e_der ON (e_der.id=ex_der.evidence_id)
   INNER JOIN association AS a_der ON (a_der.id=e_der.association_id)
   INNER JOIN term AS t_der ON (a_der.term_id=t_der.id)
   INNER JOIN gene_product AS p_der ON (a_der.gene_product_id=p_der.id)
   INNER JOIN dbxref AS px_der ON (p_der.dbxref_id=px_der.id)
   LEFT OUTER JOIN association_qualifier AS aq_der ON (a_der.id=aq_der.association_id)
   LEFT OUTER JOIN term AS aqt_der ON (aqt_der.id=aq_der.term_id)
 WHERE
   px_src.xref_dbname='FB'
  AND
   e_der.code='ISS';
</pre>
<p><br />
</p>
<a name="Suspect_ISS_assignments"></a><h3><span class="editsection">[<a href="/index.php?title=Example_Queries&amp;action=edit&amp;section=40" title="Edit section: Suspect ISS assignments">edit</a>]</span> <span class="mw-headline">Suspect ISS assignments</span></h3>
<p>An association with an ISS evidence code should be accompanied by the ID of the source gene product from which the annotation is transferred. If an annotation to term A is derived from an annotation to term B in an orthologous gene product then we would expect A to subsume B.
</p>
<pre> SELECT
   px_src.xref_dbname,
   px_src.xref_key,
   p_src.symbol,
   px_der.xref_dbname,
   px_der.xref_key,
   p_der.symbol,
   t_der.name,
   a_der.is_not,
   aqt_der.name        AS der_qual,
   e_der.code
 FROM
   gene_product AS p_src
   INNER JOIN dbxref AS px_src ON (p_src.dbxref_id=px_src.id)
   INNER JOIN evidence_dbxref AS ex_der ON (ex_der.dbxref_id=p_src.dbxref_id)
   INNER JOIN evidence AS e_der ON (e_der.id=ex_der.evidence_id)
   INNER JOIN association AS a_der ON (a_der.id=e_der.association_id)
   INNER JOIN term AS t_der ON (a_der.term_id=t_der.id)
   INNER JOIN gene_product AS p_der ON (a_der.gene_product_id=p_der.id)
   INNER JOIN dbxref AS px_der ON (p_der.dbxref_id=px_der.id)
   LEFT OUTER JOIN association_qualifier AS aq_der ON (a_der.id=aq_der.association_id)
   LEFT OUTER JOIN term AS aqt_der ON (aqt_der.id=aq_der.term_id)
 WHERE
   code = 'ISS'
  AND
   NOT EXISTS (SELECT a_src.id
               FROM 
                    association AS a_src
                    INNER JOIN graph_path AS pth ON (pth.term2_id=a_src.term_id)
               WHERE 
                     pth.term1_id=a_der.term_id
                     AND a_src.gene_product_id=p_src.id)

</pre>
<a name="See_Also"></a><h2><span class="editsection">[<a href="/index.php?title=Example_Queries&amp;action=edit&amp;section=41" title="Edit section: See Also">edit</a>]</span> <span class="mw-headline">See Also</span></h2>

<!-- Saved in parser cache with key wiki:pcache:idhash:1516-0!1!0!!en!2 and timestamp 20071105182001 -->
<div class="printfooter">
Retrieved from "<a href="http://wiki.geneontology.org/index.php/Example_Queries">http://wiki.geneontology.org/index.php/Example_Queries</a>"</div>
			<div id="catlinks"><p class='catlinks'><a href="/index.php/Special:Categories" title="Special:Categories">Category</a>: <span dir='ltr'><a href="/index.php?title=Category:Database&amp;action=edit" class="new" title="Category:Database">Database</a></span></p></div>			<!-- end content -->

			<div class="visualClear"></div>
		</div>
	</div>
		</div>
		<div id="column-one">
	<div id="p-cactions" class="portlet">
		<h5>Views</h5>
		<div class="pBody">

			<ul>
						 <li id="ca-nstab-main" class="selected"><a href="/index.php/Example_Queries">Article</a></li>
						 <li id="ca-talk" class="new"><a href="/index.php?title=Talk:Example_Queries&amp;action=edit">Discussion</a></li>
						 <li id="ca-edit"><a href="/index.php?title=Example_Queries&amp;action=edit">Edit</a></li>
						 <li id="ca-history"><a href="/index.php?title=Example_Queries&amp;action=history">History</a></li>
				</ul>
		</div>

	</div>
	<div class="portlet" id="p-personal">
		<h5>Personal tools</h5>
		<div class="pBody">
			<ul>
				<li id="pt-login"><a href="/index.php?title=Special:Userlogin&amp;returnto=Example_Queries">Log in / create account</a></li>
			</ul>
		</div>

	</div>
	<div class="portlet" id="p-logo">
		<a style="background-image: url(/images/GO-head.gif);" href="/index.php/Main_Page" title="Main Page"></a>
	</div>
	<script type="text/javascript"> if (window.isMSIE55) fixalpha(); </script>
		<div class='portlet' id='p-navigation'>
		<h5>Navigation</h5>
		<div class='pBody'>

			<ul>
				<li id="n-Main-Page"><a href="/index.php/Main_Page">Main Page</a></li>
				<li id="n-User-Advocacy"><a href="/index.php/User_Advocacy">User Advocacy</a></li>
				<li id="n-Annotation-Outreach"><a href="/index.php/Annotation_Outreach">Annotation Outreach</a></li>
				<li id="n-Ontology-Development"><a href="/index.php/Ontology_Development">Ontology Development</a></li>
				<li id="n-Reference-Genome-Focus"><a href="/index.php/Reference_Genome_Focus">Reference Genome Focus</a></li>

				<li id="n-Software-and-Utilities"><a href="/index.php/Software_and_Utilities">Software and Utilities</a></li>
				<li id="n-GO-Leadership"><a href="/index.php/GO_Leadership">GO Leadership</a></li>
				<li id="n-Working-Groups"><a href="/index.php/Working_Groups">Working Groups</a></li>
			</ul>
		</div>
	</div>
		<div class='portlet' id='p-resources'>

		<h5>resources</h5>
		<div class='pBody'>
			<ul>
				<li id="n-Mailing-list"><a href="/index.php/Mailing_lists-url">Mailing list</a></li>
				<li id="n-bug-tracker"><a href="/index.php/Bug_tracker-url">bug tracker</a></li>
				<li id="n-browse-cvs"><a href="/index.php/Browse_cvs-url">browse cvs</a></li>
				<li id="n-sourceforge-project"><a href="/index.php/Sourceforge_project-url">sourceforge project</a></li>

				<li id="n-extensions"><a href="/index.php/Extensions-url">extensions</a></li>
			</ul>
		</div>
	</div>
		<div id="p-search" class="portlet">
		<h5><label for="searchInput">Search</label></h5>
		<div id="searchBody" class="pBody">
			<form action="/index.php/Special:Search" id="searchform"><div>

				<input id="searchInput" name="search" type="text" accesskey="f" value="" />
				<input type='submit' name="go" class="searchButton" id="searchGoButton"	value="Go" />&nbsp;
				<input type='submit' name="fulltext" class="searchButton" id="mw-searchButton" value="Search" />
			</div></form>
		</div>
	</div>
	<div class="portlet" id="p-tb">
		<h5>Toolbox</h5>

		<div class="pBody">
			<ul>
				<li id="t-whatlinkshere"><a href="/index.php/Special:Whatlinkshere/Example_Queries">What links here</a></li>
				<li id="t-recentchangeslinked"><a href="/index.php/Special:Recentchangeslinked/Example_Queries">Related changes</a></li>
<li id="t-upload"><a href="/index.php/Special:Upload">Upload file</a></li>
<li id="t-specialpages"><a href="/index.php/Special:Specialpages">Special pages</a></li>
				<li id="t-print"><a href="/index.php?title=Example_Queries&amp;printable=yes">Printable version</a></li>				<li id="t-permalink"><a href="/index.php?title=Example_Queries&amp;oldid=4213">Permanent link</a></li>			</ul>

		</div>
	</div>
		</div><!-- end of the left (by default at least) column -->
			<div class="visualClear"></div>
			<div id="footer">
				<div id="f-poweredbyico"><a href="http://www.mediawiki.org/"><img src="/skins/common/images/poweredby_mediawiki_88x31.png" alt="Powered by MediaWiki" /></a></div>
			<ul id="f-list">
				<li id="lastmod"> This page was last modified 15:32, 9 October 2007.</li>

				<li id="viewcount">This page has been accessed 3,474 times.</li>
				<li id="privacy"><a href="/index.php/GO_Public:Privacy_policy" title="GO Public:Privacy policy">Privacy policy</a></li>
				<li id="about"><a href="/index.php/GO_Public:About" title="GO Public:About">About GO Public</a></li>
				<li id="disclaimer"><a href="/index.php/GO_Public:General_disclaimer" title="GO Public:General disclaimer">Disclaimers</a></li>
			</ul>
		</div>
		
	
		<script type="text/javascript">if (window.runOnloadHook) runOnloadHook();</script>

</div>
<!-- Served by bread in 0.596 secs. --></body></html>
